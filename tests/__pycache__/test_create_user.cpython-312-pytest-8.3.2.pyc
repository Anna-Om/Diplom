Ë
    ˜Ü¿f
  ã                   óf   — d dl Zd dlmc mZ d dlZd dlZd dlZd dl	m
Z
mZ d dlmZ  G d„ d«      Zy)é    N)ÚUrlsÚErrorMessage)Úgenerate_userc                   óÎ  — e Zd Z ej                  d«       ej
                  d«      d„ «       «       Z ej                  d«       ej
                  d«      d„ «       «       Z ej                  d«       ej
                  d«      d	„ «       «       Z ej                  d
«       ej
                  d«      d„ «       «       Z	 ej                  d«       ej
                  d«      d„ «       «       Z
y)ÚTestCreateUseru^   ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñu¹   Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: 200,                            Ğ¸ Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ÑÑ accessTokenc                 óş  — t        «       }t        j                  t        j                  › t        j
                  › |¬«      }|j                  «       d   }t        j                  t        j                  › t        j                  › d|i¬«       g }|j                  }d}||k(  }|}|rd}	|j                  }
|	|
v }|}|s°t        j                  d|fd||f«      dt        j                  «       v st        j                  |«      rt        j                   |«      ndt        j                   |«      t        j                   |«      d	œz  }d
d|iz  }|j#                  |«       |r t        j                  dfd	
f«      t        j                   |	«      dt        j                  «       v st        j                  |«      rt        j                   |«      ndt        j                   |
«      dœz  }dd|iz  }|j#                  |«       t        j$                  |d«      i z  }t        j&                  d|j                  › d|j                  › «      dz   d|iz  }t)        t        j*                  |«      «      ‚d x}x}x}x}x}x}	x}}
y )N©ÚdataÚaccessTokenÚAuthorization)ÚheaderséÈ   ©ú==)z3%(py4)s
{%(py4)s = %(py2)s.status_code
} == %(py7)sÚresponse)Úpy2Úpy4Úpy7ú%(py9)sÚpy9)Úin)z0%(py12)s in %(py16)s
{%(py16)s = %(py14)s.text
}©Úpy12Úpy14Úpy16ú%(py18)sÚpy18r   u)   ĞĞ¶Ğ¸Ğ´Ğ°Ğ»Ğ¾ÑÑŒ 200, Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ u†   ,                                                                                  Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ»Ğ¾ÑÑŒ "accessToken", Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ z
>assert %(py21)sÚpy21)r   ÚrequestsÚpostr   Úmain_urlÚapi_create_userÚjsonÚdeleteÚapi_delete_userÚstatus_codeÚtextÚ
@pytest_arÚ_call_reprcompareÚ@py_builtinsÚlocalsÚ_should_repr_global_nameÚ	_safereprÚappendÚ_format_boolopÚ_format_assertmsgÚAssertionErrorÚ_format_explanation)ÚselfÚplayloadr   ÚtokenÚ@py_assert1Ú@py_assert3Ú@py_assert6Ú@py_assert5Ú@py_assert0Ú@py_assert11Ú@py_assert15Ú@py_assert13Ú@py_format8Ú@py_format10Ú@py_format17Ú@py_format19Ú@py_format20Ú@py_format22s                     úAC:\Users\ermak\PycharmProjects\Diplom_2\tests\test_create_user.pyÚtest_create_userzTestCreateUser.test_create_user   s¼  € ô !“?ˆÜ—=‘=¤D§M¡M ?´4×3GÑ3GĞ2HĞ!IĞPXÔYˆØ—‘“ Ñ.ˆÜ‰œ4Ÿ=™=˜/¬$×*>Ñ*>Ğ)?Ğ@È?Ğ\aĞJbÕcò	V÷ KVñ  KV÷	Vö 	V÷ RVñ  RV÷	Vö 	V÷ EVñ  EV÷	V÷ 	Vğ 	V÷ PVñ  PV÷	Vò 	V÷ ~Vñ  ~V÷	Vò 	V÷ MVñ  MV÷	Vó 	V÷ MVñ  MV÷	Vñ 	V÷ MVñ  MV÷	V÷ 	Vñ 	V÷ PVñ  PVğ	Vô PVö	V÷ EVñ  EV÷	V÷ 	V÷ MVñ  MV÷	Vò 	V÷ PVñ  PV÷	Vò 	V÷ ~Vñ  ~V÷	Vò 	V÷ MVñ  MV÷	Vó 	V÷ MVñ  MV÷	V÷ 	Vñ 	V÷ PVñ  PVğ	Vô PVô	V÷ HVñ  HV÷	Vö 	V÷ EVñ  EVñ	V÷ KVñ  KVò	V÷ RVñ  RV÷	V÷ 	V÷ 	Vğ 	V÷ CVñ  CV÷	V÷ 	V÷ 	Vò 	Vó    uS   ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñuá   Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: 403,                            Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: 403, Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° "User already exists"c                 ó°  — t        «       }t        j                  t        j                  › t        j
                  › |¬«       t        j                  t        j                  › t        j
                  › |¬«      }g }d}|j                  }||k(  }|}|r*|j                  «       d   }t        j                  }	||	k(  }
|
}|sˆt        j                  d|fd||f«      t        j                  |«      dt        j                  «       v st        j                  |«      rt        j                  |«      ndt        j                  |«      dœz  }dd	|iz  }|j!                  |«       |r¨t        j                  d
fd
	f«      t        j                  |«      dt        j                  «       v st        j                  t        «      rt        j                  t        «      ndt        j                  |	«      dœz  }dd|iz  }|j!                  |«       t        j"                  |d«      i z  }dd|iz  }t%        t        j&                  |«      «      ‚d x}x}x}x}x}x}x}
}	y )Nr	   é“  Úmessager   ©z3%(py3)s == %(py7)s
{%(py7)s = %(py5)s.status_code
}r   ©Úpy3Úpy5r   r   r   )zB%(py12)s == %(py16)s
{%(py16)s = %(py14)s.text_create_403_double
}r   r   r   r   r   úassert %(py21)sr   )r   r   r    r   r!   r"   r&   r#   r   Útext_create_403_doubler(   r)   r-   r*   r+   r,   r.   r/   r1   r2   )r3   r4   r   r6   Ú@py_assert2r8   Ú@py_assert4r:   r;   r<   r=   r>   r?   r@   rA   rB   rC   s                    rD   Útest_create_user_doublez&TestCreateUser.test_create_user_double   s  € ô !“?ˆÜ‰œŸ™˜¬×(<Ñ(<Ğ'=Ğ>ÀXÕNÜ—=‘=¤D§M¡M ?´4×3GÑ3GĞ2HĞ!IĞPXÔYˆßq×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×q×qÖqrF   uR   ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ±ĞµĞ· Ğ¸Ğ¼ĞµĞ½Ğ¸uß   Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¼ name,                         Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: 403, Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° "Email, password and name are required fields"c                 óH  — t        «       }|d= t        j                  t        j                  › t        j
                  › i ¬«      }g }d}|j                  }||k(  }|}|r*|j                  «       d   }t        j                  }	||	k(  }
|
}|sˆt        j                  d|fd||f«      t        j                  |«      dt        j                  «       v st        j                  |«      rt        j                  |«      ndt        j                  |«      dœz  }d	d
|iz  }|j!                  |«       |r¨t        j                  d
fd	f«      t        j                  |«      dt        j                  «       v st        j                  t        «      rt        j                  t        «      ndt        j                  |	«      dœz  }dd|iz  }|j!                  |«       t        j"                  |d«      i z  }dd|iz  }t%        t        j&                  |«      «      ‚d x}x}x}x}x}x}x}
}	y )NÚnamer	   rH   rI   r   rJ   r   rK   r   r   ©zA%(py12)s == %(py16)s
{%(py16)s = %(py14)s.text_create_403_wrong
}r   r   r   r   r   rN   r   ©r   r   r    r   r!   r"   r&   r#   r   Útext_create_403_wrongr(   r)   r-   r*   r+   r,   r.   r/   r1   r2   ©r3   Úpayloadr   r6   rP   r8   rQ   r:   r;   r<   r=   r>   r?   r@   rA   rB   rC   s                    rD   Útest_create_user_without_namez,TestCreateUser.test_create_user_without_name   së   € ô  “/ˆØFˆOÜ—=‘=¤D§M¡M ?´4×3GÑ3GĞ2HĞ!IĞPRÔSˆßo×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×oÖorF   uR   ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ±ĞµĞ· Ğ¿Ğ¾Ñ‡Ñ‚Ñ‹uã   Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¼ email,                            Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: 403, Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° "Email, password and name are required fields"c                 óH  — t        «       }|d= t        j                  t        j                  › t        j
                  › i ¬«      }g }d}|j                  }||k(  }|}|r*|j                  «       d   }t        j                  }	||	k(  }
|
}|sˆt        j                  d|fd||f«      t        j                  |«      dt        j                  «       v st        j                  |«      rt        j                  |«      ndt        j                  |«      dœz  }d	d
|iz  }|j!                  |«       |r¨t        j                  d
fd	f«      t        j                  |«      dt        j                  «       v st        j                  t        «      rt        j                  t        «      ndt        j                  |	«      dœz  }dd|iz  }|j!                  |«       t        j"                  |d«      i z  }dd|iz  }t%        t        j&                  |«      «      ‚d x}x}x}x}x}x}x}
}	y )NÚemailr	   rH   rI   r   rJ   r   rK   r   r   rU   r   r   r   r   r   rN   r   rV   rX   s                    rD   Útest_create_user_without_emailz-TestCreateUser.test_create_user_without_email%   sì   € ô “ˆØGĞÜ—=‘=¤D§M¡M ?´4×3GÑ3GĞ2HĞ!IĞPRÔSˆßo×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×oÖorF   uT   ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ±ĞµĞ· Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñuê   Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¼ password,                                Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ´ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: 403, Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° "Email, password and name are required fields"c                 óH  — t        «       }|d= t        j                  t        j                  › t        j
                  › i ¬«      }g }d}|j                  }||k(  }|}|r*|j                  «       d   }t        j                  }	||	k(  }
|
}|sˆt        j                  d|fd||f«      t        j                  |«      dt        j                  «       v st        j                  |«      rt        j                  |«      ndt        j                  |«      dœz  }d	d
|iz  }|j!                  |«       |r¨t        j                  d
fd	f«      t        j                  |«      dt        j                  «       v st        j                  t        «      rt        j                  t        «      ndt        j                  |	«      dœz  }dd|iz  }|j!                  |«       t        j"                  |d«      i z  }dd|iz  }t%        t        j&                  |«      «      ‚d x}x}x}x}x}x}x}
}	y )NÚpasswordr	   rH   rI   r   rJ   r   rK   r   r   rU   r   r   r   r   r   rN   r   rV   rX   s                    rD   Ú!test_create_user_without_passwordz0TestCreateUser.test_create_user_without_password.   sì   € ô “ˆØJĞÜ—=‘=¤D§M¡M ?´4×3GÑ3GĞ2HĞ!IĞPRÔSˆßo×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×o×oÖorF   N)Ú__name__Ú
__module__Ú__qualname__ÚallureÚtitleÚdescriptionrE   rR   rZ   r]   r`   © rF   rD   r   r      s@  „ à€V‡\\ĞrÓsØ€V×Ñğ ^ó _ñVó_ó tğVğ €V‡\\ĞgÓhØ€V×Ñğ Fó GñróGó iğrğ €V‡\\ĞfÓgØ€V×Ñğ Xó YñpóYó hğpğ €V‡\\ĞfÓgØ€V×Ñğ [ó \ñpó\ó hğpğ €V‡\\ĞhÓiØ€V×Ñğ _ó `ñpó`ó jñprF   r   )Úbuiltinsr*   Ú_pytest.assertion.rewriteÚ	assertionÚrewriter(   Úpytestr   rd   r
   r   r   Ú	user_datar   r   rg   rF   rD   ú<module>rn      s$   ğß  „ ƒÛ Û ß #İ #÷/pò /prF   